import matplotlib.pyplot as plt
import numpy as np


# Example histogram data for two countries (replace with your data):
histogram_data = {
    "AU": {
    "Budget": {
        "bins": [450.00, 11000405.00, 22000360.00, 33000315.00, 44000270.00, 55000225.00, 66000180.00, 77000135.00, 88000090.00, 99000045.00, 110000000.00],
        "counts": [12, 1, 0, 0, 1, 0, 0, 0, 0, 1]
    },
    "Revenue": {
        "bins": [288.00, 10395405.30, 20790522.60, 31185639.90, 41580757.20, 51975874.50, 62370991.80, 72766109.10, 83161226.40, 93556343.70, 103951461.00],
        "counts": [9, 1, 3, 0, 0, 1, 0, 0, 0, 1]
    },
    "Profit": {
        "bins": [-7601372.00, -4364234.80, -1127097.60, 2110039.60, 5347176.80, 8584314.00, 11821451.20, 15058588.40, 18295725.60, 21532862.80, 24770000.00],
        "counts": [3, 1, 4, 2, 1, 1, 0, 0, 0, 3]
    }
},
"IN": {
    "Budget": {
        "bins": [1.00, 25500000.90, 51000000.80, 76500000.70, 102000000.60, 127500000.50, 153000000.40, 178500000.30, 204000000.20, 229500000.10, 255000000.00],
        "counts": [87, 36, 12, 5, 3, 2, 3, 1, 0, 1]
    },
    "Revenue": {
        "bins": [4.00, 78867988.60, 157735973.20, 236603957.80, 315471942.40, 394339927.00, 473207911.60, 552075896.20, 630943880.80, 709811865.40, 788679850.00],
        "counts": [101, 23, 12, 6, 3, 1, 2, 0, 0, 2]
    },
    "Profit": {
        "bins": [-165710090.00, -86271096.00, -6832102.00, 72606892.00, 152045886.00, 231484880.00, 310923874.00, 390362868.00, 469801862.00, 549240856.00, 628679850.00],
        "counts": [1, 25, 92, 16, 7, 4, 1, 1, 1, 2]
    }
},
"JP": {
    "Budget": {
        "bins": [50.00, 10000045.00, 20000040.00, 30000035.00, 40000030.00, 50000025.00, 60000020.00, 70000015.00, 80000010.00, 90000005.00, 100000000.00],
        "counts": [15, 6, 3, 2, 2, 0, 3, 3, 1, 1]
    },
    "Revenue": {
        "bins": [83.00, 34745264.10, 69490445.20, 104235626.30, 138980807.40, 173725988.50, 208471169.60, 243216350.70, 277961531.80, 312706712.90, 347451894.00],
        "counts": [15, 3, 8, 2, 2, 3, 1, 1, 0, 1]
    },
    "Profit": {
        "bins": [-24958633.00, 2282419.70, 29523472.40, 56764525.10, 84005577.80, 111246630.50, 138487683.20, 165728735.90, 192969788.60, 220210841.30, 247451894.00],
        "counts": [9, 10, 3, 3, 4, 2, 3, 1, 0, 1]
    }
},
"TH": {
    "Budget": {
        "bins": [1000000.00, 11200000.00, 21400000.00, 31600000.00, 41800000.00, 52000000.00, 62200000.00, 72400000.00, 82600000.00, 92800000.00, 103000000.00],
        "counts": [1, 1, 1, 2, 1, 0, 0, 0, 0, 1]
    },
    "Revenue": {
        "bins": [4644108.00, 40379704.40, 76115300.80, 111850897.20, 147586493.60, 183322090.00, 219057686.40, 254793282.80, 290528879.20, 326264475.60, 362000072.00],
        "counts": [3, 1, 0, 1, 1, 0, 0, 0, 0, 1]
    },
    "Profit": {
        "bins": [-20355892.00, 7579704.40, 35515300.80, 63450897.20, 91386493.60, 119322090.00, 147257686.40, 175193282.80, 203128879.20, 231064475.60, 259000072.00],
        "counts": [2, 2, 0, 0, 1, 1, 0, 0, 0, 1]
    }
},
"EG": {
    "Budget": {
        "bins": [250000.00, 3825000.00, 7400000.00, 10975000.00, 14550000.00, 18125000.00, 21700000.00, 25275000.00, 28850000.00, 32425000.00, 36000000.00],
        "counts": [4, 0, 0, 0, 0, 0, 0, 1, 0, 1]
    },
    "Revenue": {
        "bins": [56825.00, 19022385.70, 37987946.40, 56953507.10, 75919067.80, 94884628.50, 113850189.20, 132815749.90, 151781310.60, 170746871.30, 189712432.00],
        "counts": [4, 1, 0, 0, 0, 0, 0, 0, 0, 1]
    },
    "Profit": {
        "bins": [-193175.00, 15197385.70, 30587946.40, 45978507.10, 61369067.80, 76759628.50, 92150189.20, 107540749.90, 122931310.60, 138321871.30, 153712432.00],
        "counts": [5, 0, 0, 0, 0, 0, 0, 0, 0, 1]
    }
},
"LB": {
    "Budget": {
        "bins": [11500000.00, 26350000.00, 41200000.00, 56050000.00, 70900000.00, 85750000.00, 100600000.00, 115450000.00, 130300000.00, 145150000.00, 160000000.00],
        "counts": [2, 2, 1, 0, 0, 1, 1, 1, 0, 1]
    },
    "Revenue": {
        "bins": [5914908.00, 39931394.50, 73947881.00, 107964367.50, 141980854.00, 175997340.50, 210013827.00, 244030313.50, 278046800.00, 312063286.50, 346079773.00],
        "counts": [3, 0, 0, 1, 0, 2, 1, 0, 0, 2]
    },
    "Profit": {
        "bins": [-26085092.00, 5631394.50, 37347881.00, 69064367.50, 100780854.00, 132497340.50, 164213827.00, 195930313.50, 227646800.00, 259363286.50, 291079773.00],
        "counts": [2, 2, 0, 1, 2, 0, 0, 1, 0, 1]
    }
},
"CA": {
    "Budget": {
        "bins": [100000.00, 15090000.00, 30080000.00, 45070000.00, 60060000.00, 75050000.00, 90040000.00, 105030000.00, 120020000.00, 135010000.00, 150000000.00],
        "counts": [19, 11, 6, 1, 3, 0, 0, 1, 1, 1]
    },
    "Revenue": {
        "bins": [100.00, 97647645.00, 195295190.00, 292942735.00, 390590280.00, 488237825.00, 585885370.00, 683532915.00, 781180460.00, 878828005.00, 976475550.00],
        "counts": [32, 3, 3, 2, 1, 0, 0, 1, 0, 1]
    },
    "Profit": {
        "bins": [-31370522.00, 56914085.20, 145198692.40, 233483299.60, 321767906.80, 410052514.00, 498337121.20, 586621728.40, 674906335.60, 763190942.80, 851475550.00],
        "counts": [31, 4, 4, 1, 1, 0, 0, 1, 0, 1]
    }
},
"AR": {
    "Budget": {
        "bins": [93.00, 11000083.70, 22000074.40, 33000065.10, 44000055.80, 55000046.50, 66000037.20, 77000027.90, 88000018.60, 99000009.30, 110000000.00],
        "counts": [6, 3, 0, 1, 1, 0, 2, 0, 0, 1]
    },
    "Revenue": {
        "bins": [3358.00, 25503043.30, 51002728.60, 76502413.90, 102002099.20, 127501784.50, 153001469.80, 178501155.10, 204000840.40, 229500525.70, 255000211.00],
        "counts": [7, 1, 0, 2, 1, 1, 1, 0, 0, 1]
    },
    "Profit": {
        "bins": [-12981705.00, 6816486.60, 26614678.20, 46412869.80, 66211061.40, 86009253.00, 105807444.60, 125605636.20, 145403827.80, 165202019.40, 185000211.00],
        "counts": [5, 3, 1, 1, 2, 0, 0, 1, 0, 1]
    }
},
"GB": {
    "Budget": {
        "bins": [3.00, 20000002.70, 40000002.40, 60000002.10, 80000001.80, 100000001.50, 120000001.20, 140000000.90, 160000000.60, 180000000.30, 200000000.00],
        "counts": [37, 15, 5, 4, 2, 0, 0, 1, 0, 2]
    },
    "Revenue": {
        "bins": [43.00, 106697009.00, 213393975.00, 320090941.00, 426787907.00, 533484873.00, 640181839.00, 746878805.00, 853575771.00, 960272737.00, 1066969703.00],
        "counts": [53, 8, 2, 0, 1, 0, 0, 0, 0, 2]
    },
    "Profit": {
        "bins": [-111007242.00, -13209547.50, 84588147.00, 182385841.50, 280183536.00, 377981230.50, 475778925.00, 573576619.50, 671374314.00, 769172008.50, 866969703.00],
        "counts": [6, 49, 6, 2, 0, 0, 1, 0, 0, 2]
    }
},
"US":{
    "Budget": {
        "bins": [2.00, 25000001.80, 50000001.60, 75000001.40, 100000001.20, 125000001.00, 150000000.80, 175000000.60, 200000000.40, 225000000.20, 250000000.00],
        "counts": [318, 107, 48, 24, 8, 13, 3, 1, 0, 1]
    },
    "Revenue": {
        "bins": [1.00, 95430587.70, 190861174.40, 286291761.10, 381722347.80, 477152934.50, 572583521.20, 668014107.90, 763444694.60, 858875281.30, 954305868.00],
        "counts": [379, 67, 32, 19, 13, 3, 3, 3, 2, 2]
    },
    "Profit": {
        "bins": [-91969578.00, -5788744.40, 80392089.20, 166572922.80, 252753756.40, 338934590.00, 425115423.60, 511296257.20, 597477090.80, 683657924.40, 769838758.00],
        "counts": [90, 309, 63, 22, 17, 8, 5, 3, 3, 3]
    }
},
"DK": {
    "Budget": {
        "bins": [2000000.00, 11800000.00, 21600000.00, 31400000.00, 41200000.00, 51000000.00, 60800000.00, 70600000.00, 80400000.00, 90200000.00, 100000000.00],
        "counts": [1, 1, 1, 0, 0, 1, 0, 0, 0, 1]
    },
    "Revenue": {
        "bins": [4000000.00, 55600000.00, 107200000.00, 158800000.00, 210400000.00, 262000000.00, 313600000.00, 365200000.00, 416800000.00, 468400000.00, 520000000.00],
        "counts": [3, 1, 0, 0, 0, 0, 0, 0, 0, 1]
    },
    "Profit": {
        "bins": [-45510171.00, 1040846.10, 47591863.20, 94142880.30, 140693897.40, 187244914.50, 233795931.60, 280346948.70, 326897965.80, 373448982.90, 420000000.00],
        "counts": [1, 2, 1, 0, 0, 0, 0, 0, 0, 1]
    }
}




}


# Plotting histograms
for country, metrics in histogram_data.items():
    fig, axes = plt.subplots(1, 3, figsize=(15, 5), sharey=True)
    fig.suptitle(f"Histograms for {country}", fontsize=16)


    for ax, (metric, data) in zip(axes, metrics.items()):
        bins = data["bins"]
        counts = data["counts"]
       
        # Calculate bin centers for better alignment
        bin_centers = (np.array(bins[:-1]) + np.array(bins[1:])) / 2


        ax.bar(bin_centers, counts, width=np.diff(bins), edgecolor='black', align='center')
        ax.set_title(metric)
        ax.set_xlabel("Value Range")
        ax.set_ylabel("Frequency")


    plt.tight_layout(rect=[0, 0, 1, 0.95])
    plt.show()



